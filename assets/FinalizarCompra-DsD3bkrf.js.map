{"version":3,"file":"FinalizarCompra-DsD3bkrf.js","sources":["../../src/pages/FinalizarCompra.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Botao } from '@/components/ui/botao';\nimport { Entrada } from '@/components/ui/entrada';\nimport { Label } from '@/components/ui/rotulo';\nimport { GrupoRadio, ItemGrupoRadio } from '@/components/ui/grupo-radio';\nimport { Cartao, ConteudoCartao, CabecalhoCartao, TituloCartao, RodapeCartao } from '@/components/ui/cartao-ui';\nimport { useNotificacao } from \"@/components/ui/useNotificacao\";\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronLeft, CreditCard, Landmark, QrCode, MapPin, Edit2, PlusCircle, Trash2, CheckCircle } from 'lucide-react';\nimport { useAuth } from '@/contexts/ContextoAutenticacao';\n\n// ==============================\n// PÁGINA DE FINALIZAÇÃO\n// ONDE O USUÁRIO DESISTE NO MEIO E A GENTE CHORA\n// (mas finge que não liga)\n// ==============================\nconst CheckoutPage = () => {\n  const navigate = useNavigate();\n  // Pega o usuário logado (ou não, vai que ele deu f5 no meio do caminho)\n  const { user } = useAuth(); // Se não tiver usuário, já era\n  const { notificar } = useNotificacao();\n\n  // ===== ESTADOS =====\n  // (a parte chata que todo componente React tem)\n  \n  // Itens do carrinho (que provavelmente vão pro limbo)\n  const [cartItems, setCartItems] = useState([]);\n  \n  // Valor que dói no bolso (antes do frete)\n  const [subtotal, setSubtotal] = useState(0);\n  \n  // Frete fixo porque somos preguiçosos pra calcular de verdade\n  // (e também porque ninguém gosta de surpresas no checkout)\n  const [shippingCost, setShippingCost] = useState(15.00);\n  \n  // Total = subtotal + frete (uau, que matemática avançada!)\n  const [total, setTotal] = useState(0);\n\n  // ===== CONTROLE DE PASSOS =====\n  // (igual aqueles tutoriais que a gente nunca termina)\n  // 1: Onde você mora (ou mente que mora)\n  // 2: Como vai pagar (ou não vai, quem sabe)\n  // 3: Hora do arrependimento (ops, revisão)\n  const [currentStep, setCurrentStep] = useState(1);\n  \n  // ===== ENDEREÇOS =====\n  // Lista de endereços (ou a desculpa que você dá pro motoboy quando atrasa)\n  const [addresses, setAddresses] = useState([\n    { \n      id: '1', \n      street: 'Rua das Flores, 123', \n      city: 'Cidade Exemplo', \n      state: 'EX', \n      zip: '12345-678', \n      country: 'Brasil', \n      isDefault: true \n    },\n    { \n      id: '2', \n      street: 'Avenida Principal, 456', \n      city: 'Outra Cidade', \n      state: 'OC', \n      zip: '98765-432', \n      country: 'Brasil', \n      isDefault: false \n    },\n  ]);\n  const [selectedAddressId, setSelectedAddressId] = useState(addresses.find(a => a.isDefault)?.id || addresses[0]?.id || '');\n  const [showAddAddressForm, setShowAddAddressForm] = useState(false);\n  const [newAddress, setNewAddress] = useState({ street: '', city: '', state: '', zip: '', country: 'Brasil' });\n\n  // ===== PAGAMENTO =====\n  // Parte chata onde a gente finge que valida cartão\n  // (mas aceitamos até cartão de crédito de banco imobiliário)\n  const [paymentMethod, setPaymentMethod] = useState('creditCard');\n  \n  // Dados do cartão (que a gente jura que não vai vender no mercado negro)\n  const [cardDetails, setCardDetails] = useState({ \n    number: '',  // Número do cartão (ou do cartão da mãe)\n    name: '',    // Nome no cartão (ou qualquer um que você inventar)\n    expiry: '',  // Validade (quando o cartão vira abóbora)\n    cvv: ''      // Os 3 números mágicos atrás do cartão\n  });\n\n  // Quando o componente nasce, a gente tenta pegar o carrinho salvo\n  // (ou finge que tenta, porque quem garante que vai ter algo lá?)\n  useEffect(() => {\n    const carrinhoSalvo = JSON.parse(localStorage.getItem('cart') || '[]');\n    setCartItems(carrinhoSalvo);\n\n    // Fazendo contas de matemática avançada (multiplicação básica)\n    const totalParcial = carrinhoSalvo.reduce((soma, item) => {\n      const preco = parseFloat(item.price.replace('R$ ', '').replace(',', '.'));\n      return soma + (preco * item.quantity);\n    }, 0);\n    \n    setSubtotal(totalParcial); // Atualiza o subtotal (e o choro no coração)\n  }, []);\n\n  // Atualiza o total quando o subtotal ou frete mudarem\n  // (matemágica pura aqui, nada de truques)\n  useEffect(() => {\n    setTotal(subtotal + shippingCost);\n  }, [subtotal, shippingCost]);\n\n  // valida o formulário\n// se tiver algo errado, já era\nconst validateForm = () => {\n    if (currentStep === 1 && !selectedAddressId) {\n      notificar({ title: \"Endereço Necessário\", description: \"Por favor, selecione ou adicione um endereço de entrega.\", variant: \"destructive\", duration: 3000 });\n      return;\n    }\n    if (currentStep === 2) {\n      // Basic payment validation (very simplified)\n      if (paymentMethod === 'creditCard' && (!cardDetails.number || !cardDetails.name || !cardDetails.expiry || !cardDetails.cvv)) {\n        notificar({ title: \"Dados do Cartão Incompletos\", description: \"Preencha todos os campos do cartão.\", variant: \"destructive\", duration: 3000 });\n        return;\n      }\n    }\n    setCurrentStep(prev => prev + 1);\n  };\n\n  const handlePrevStep = () => setCurrentStep(prev => prev - 1);\n\n  // Função que adiciona um novo endereço\n  // (ou tenta, pelo menos)\n  const handleAddAddress = (e) => {\n    e.preventDefault(); // Impece o formulário de dar refresh na página\n    \n    // Verifica se o usuário preencheu tudo direito (duvido)\n    if (!newAddress.street || !newAddress.city || !newAddress.state || !newAddress.zip) {\n      notificar({ \n        title: \"Ei, falta coisa aí!\", \n        description: \"Preencha todos os campos, por favorzinho. A gente implora.\", \n        variant: \"destructive\", \n        duration: 2000 \n      });\n      return; // Tchau, falou\n    }\n    const newAddr = { ...newAddress, id: Date.now().toString(), isDefault: addresses.length === 0 };\n    setAddresses([...addresses, newAddr]);\n    setSelectedAddressId(newAddr.id);\n    setNewAddress({ street: '', city: '', state: '', zip: '', country: 'Brasil' });\n    setShowAddAddressForm(false);\n    notificar({ title: \"Endereço Adicionado!\", duration: 1500 });\n  };\n\n  const handleRemoveAddress = (addressId) => {\n    setAddresses(addresses.filter(addr => addr.id !== addressId));\n    if (selectedAddressId === addressId) {\n      setSelectedAddressId(addresses.find(a => a.isDefault)?.id || addresses[0]?.id || '');\n    }\n    notificar({ title: \"Endereço Removido\", variant: \"destructive\", duration: 1500 });\n  };\n  \n  const handleCardEntradaChange = (e) => {\n    const { name, value } = e.target;\n    let formattedValue = value;\n    if (name === 'number') {\n      formattedValue = value.replace(/\\D/g, '').replace(/(\\d{4})/g, '$1 ').trim().slice(0, 19);\n    } else if (name === 'expiry') {\n      formattedValue = value.replace(/\\D/g, '').replace(/(\\d{2})(\\d{0,2})/, '$1/$2').slice(0,5);\n    } else if (name === 'cvv') {\n      formattedValue = value.replace(/\\D/g, '').slice(0,3);\n    }\n    setCardDetails(prev => ({ ...prev, [name]: formattedValue }));\n  };\n\n  // Função que finaliza o pedido (ou tenta)\n  const handleSubmitOrder = () => {\n    // Limpa o carrinho (adeus, produtos queridos)\n    localStorage.removeItem('cart');\n    // Avisa pra todo mundo que o carrinho mudou (leia-se: foi pro saco)\n    window.dispatchEvent(new CustomEvent('cartUpdated'));\n    notificar({\n      title: \"Pedido Realizado com Sucesso!\",\n      description: \"Você receberá atualizações por e-mail.\",\n      className: \"bg-green-500 text-white dark:bg-green-600\",\n      icon: <CheckCircle className=\"h-5 w-5 text-white\" />,\n      duration: 5000\n    });\n    navigate('/profile/orders'); \n  };\n\n  const selectedAddress = addresses.find(addr => addr.id === selectedAddressId);\n\n  const steps = [\"Endereço\", \"Pagamento\", \"Revisão\"];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"div-container div-espacada\"\n    >\n      <div className=\"flex items-center mb-6 sm:mb-8\">\n        {currentStep > 1 && (\n          <Botao variant=\"ghost\" size=\"icon\" onClick={handlePrevStep} className=\"mr-2 text-brand-primary-kaline hover:bg-brand-primary-kaline/10\">\n            <ChevronLeft className=\"h-6 w-6\" />\n          </Botao>\n        )}\n        <h1 className=\"text-2xl sm:text-3xl font-bold font-heading text-brand-text-kaline\">Finalizar Compra</h1>\n      </div>\n\n     \n      <div className=\"mb-8\">\n        <div className=\"flex justify-between mb-1\">\n          {steps.map((step, index) => (\n            <span key={step} className={`text-xs sm:text-sm ${index + 1 <= currentStep ? 'text-brand-primary-kaline font-semibold' : 'text-brand-text-muted-kaline'}`}>\n              {step}\n            </span>\n          ))}\n        </div>\n        <div className=\"w-full bg-muted rounded-full h-2\">\n          <motion.div \n            className=\"bg-brand-primary-kaline h-2 rounded-full\"\n            initial={{ width: \"0%\"}}\n            animate={{ width: `${(currentStep / steps.length) * 100}%` }}\n            transition={{ duration: 0.5, ease: \"easeInOut\" }}\n          />\n        </div>\n      </div>\n\n      <div className=\"div-espacada\">\n        <div className=\"grid lg:grid-cols-3 gap-6 sm:gap-8\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            \n            <AnimatePresence mode=\"wait\">\n            {currentStep === 1 && (\n              <motion.div key=\"address-step\" initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 20 }} transition={{ duration: 0.3 }}>\n                <Cartao className=\"div-destaque div-arredondada div-sombra\">\n                  <Cartao.Header>\n                    <Cartao.Title className=\"text-xl sm:text-2xl text-brand-text-kaline\">Endereço de Entrega</Cartao.Title>\n                  </Cartao.Header>\n                  <Cartao.Content className=\"space-y-4\">\n                    <GrupoRadio value={selectedAddressId} onValueChange={setSelectedAddressId} aria-label=\"Selecione o endereço de entrega\">\n                      {addresses.map(addr => (\n                        <Label key={addr.id} htmlFor={`addr-${addr.id}`} className={`flex items-start p-3 border rounded-md cursor-pointer transition-all ${selectedAddressId === addr.id ? 'border-brand-primary-kaline ring-2 ring-brand-primary-kaline bg-brand-primary-kaline/5' : 'border-input hover:border-brand-primary-kaline/50'}`}>\n                          <ItemGrupoRadio value={addr.id} id={`addr-${addr.id}`} className=\"mt-1 mr-3 border-brand-primary-kaline text-brand-primary-kaline focus:ring-brand-primary-kaline\" />\n                          <div className=\"flex-1\">\n                            <p className=\"font-medium text-sm sm:text-base text-brand-text-kaline\">{addr.street}</p>\n                            <p className=\"text-xs sm:text-sm text-brand-text-muted-kaline\">{addr.city}, {addr.state} - {addr.zip}</p>\n                          </div>\n                          <Botao variant=\"ghost\" size=\"icon\" onClick={(e) => { e.preventDefault(); e.stopPropagation(); handleRemoveAddress(addr.id); }} className=\"text-destructive hover:text-destructive/80 h-7 w-7 sm:h-8 sm:w-8 ml-2\">\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Botao>\n                        </Label>\n                      ))}\n                    </GrupoRadio>\n                    <Botao variant=\"outline\" onClick={() => setShowAddAddressForm(!showAddAddressForm)} className=\"w-full text-brand-primary-kaline border-brand-primary-kaline/50 hover:bg-brand-primary-kaline/10 text-sm\">\n                      <PlusCircle className=\"mr-2 h-4 w-4\" /> {showAddAddressForm ? 'Cancelar Novo Endereço' : 'Adicionar Novo Endereço'}\n                    </Botao>\n                    {showAddAddressForm && (\n                      <form onSubmit={handleAddAddress} className=\"space-y-3 pt-3 border-t border-border\">\n                        <Entrada placeholder=\"Rua, Número, Bairro\" value={newAddress.street} onChange={e => setNewAddress({...newAddress, street: e.target.value})} className=\"text-sm\" />\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <Entrada placeholder=\"Cidade\" value={newAddress.city} onChange={e => setNewAddress({...newAddress, city: e.target.value})} className=\"text-sm\" />\n                          <Entrada placeholder=\"Estado (UF)\" value={newAddress.state} onChange={e => setNewAddress({...newAddress, state: e.target.value})} className=\"text-sm\" />\n                        </div>\n                        <Entrada placeholder=\"CEP\" value={newAddress.zip} onChange={e => setNewAddress({...newAddress, zip: e.target.value})} className=\"text-sm\" />\n                        <Botao type=\"submit\" className=\"w-full btn-primary-kaline text-sm\">Salvar Endereço</Botao>\n                      </form>\n                    )}\n                  </Cartao.Content>\n                </Cartao>\n              </motion.div>\n            )}\n\n            \n            {currentStep === 2 && (\n              <motion.div key=\"payment-step\" initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 20 }} transition={{ duration: 0.3 }}>\n                <Cartao className=\"div-destaque div-arredondada div-sombra\">\n                  <Cartao.Header>\n                    <Cartao.Title className=\"text-xl sm:text-2xl text-brand-text-kaline\">Forma de Pagamento</Cartao.Title>\n                  </Cartao.Header>\n                  <Cartao.Content>\n                    <GrupoRadio value={paymentMethod} onValueChange={setPaymentMethod} className=\"space-y-3\" aria-label=\"Selecione a forma de pagamento\">\n                      {[\n                        { value: 'creditCard', label: 'Cartão de Crédito', icon: CreditCard },\n                        { value: 'boleto', label: 'Boleto Bancário', icon: Landmark },\n                        { value: 'pix', label: 'PIX', icon: QrCode },\n                      ].map(method => (\n                        <Label key={method.value} htmlFor={`payment-${method.value}`} className={`flex items-center p-3 border rounded-md cursor-pointer transition-all ${paymentMethod === method.value ? 'border-brand-primary-kaline ring-2 ring-brand-primary-kaline bg-brand-primary-kaline/5' : 'border-input hover:border-brand-primary-kaline/50'}`}>\n                          <ItemGrupoRadio value={method.value} id={`payment-${method.value}`} className=\"mr-3 border-brand-primary-kaline text-brand-primary-kaline focus:ring-brand-primary-kaline\" />\n                          <method.icon className=\"h-5 w-5 mr-2 text-brand-text-muted-kaline\" />\n                          <span className=\"text-sm sm:text-base text-brand-text-kaline\">{method.label}</span>\n                        </Label>\n                      ))}\n                    </GrupoRadio>\n                    {paymentMethod === 'creditCard' && (\n                      <div className=\"mt-4 space-y-3 pt-3 border-t border-border\">\n                        <Entrada name=\"number\" placeholder=\"Número do Cartão (0000 0000 0000 0000)\" value={cardDetails.number} onChange={handleCardEntradaChange} className=\"text-sm\" />\n                        <Entrada name=\"name\" placeholder=\"Nome no Cartão\" value={cardDetails.name} onChange={handleCardEntradaChange} className=\"text-sm\" />\n                        <div className=\"grid grid-cols-2 gap-3\">\n                          <Entrada name=\"expiry\" placeholder=\"Validade (MM/AA)\" value={cardDetails.expiry} onChange={handleCardEntradaChange} className=\"text-sm\" />\n                          <Entrada name=\"cvv\" placeholder=\"CVV\" value={cardDetails.cvv} onChange={handleCardEntradaChange} className=\"text-sm\" />\n                        </div>\n                      </div>\n                    )}\n                    {paymentMethod === 'boleto' && <p className=\"mt-4 text-sm text-brand-text-muted-kaline\">O boleto será gerado após a finalização do pedido.</p>}\n                    {paymentMethod === 'pix' && <p className=\"mt-4 text-sm text-brand-text-muted-kaline\">O QR Code para pagamento PIX será exibido após a finalização.</p>}\n                  </Cartao.Content>\n                </Cartao>\n              </motion.div>\n            )}\n\n            \n            {currentStep === 3 && (\n              <motion.div key=\"review-step\" initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 20 }} transition={{ duration: 0.3 }}>\n                <Cartao className=\"div-destaque div-arredondada div-sombra\">\n                  <Cartao.Header>\n                    <Cartao.Title className=\"text-xl sm:text-2xl text-brand-text-kaline\">Revisar Pedido</Cartao.Title>\n                  </Cartao.Header>\n                  <Cartao.Content className=\"space-y-4\">\n                    <div>\n                      <h3 className=\"font-semibold mb-1 text-brand-text-kaline\">Itens do Pedido:</h3>\n                      {cartItems.map(item => (\n                        <div key={item.id + item.size + item.color} className=\"flex justify-between items-center text-sm py-1 border-b border-border/50 last:border-b-0\">\n                          <span className=\"text-brand-text-muted-kaline\">{item.name} (x{item.quantity})</span>\n                          <span className=\"text-brand-text-kaline\">R$ {(parseFloat(item.price.replace('R$ ', '').replace(',', '.')) * item.quantity).toFixed(2).replace('.', ',')}</span>\n                        </div>\n                      ))}\n                    </div>\n                    {selectedAddress && (\n                      <div>\n                        <h3 className=\"font-semibold mb-1 text-brand-text-kaline\">Endereço de Entrega:</h3>\n                        <p className=\"text-sm text-brand-text-muted-kaline\">{selectedAddress.street}, {selectedAddress.city} - {selectedAddress.state}, {selectedAddress.zip}</p>\n                      </div>\n                    )}\n                    <div>\n                      <h3 className=\"font-semibold mb-1 text-brand-text-kaline\">Forma de Pagamento:</h3>\n                      <p className=\"text-sm text-brand-text-muted-kaline\">\n                        {paymentMethod === 'creditCard' && `Cartão de Crédito final ${cardDetails.number.slice(-4)}`}\n                        {paymentMethod === 'boleto' && 'Boleto Bancário'}\n                        {paymentMethod === 'pix' && 'PIX'}\n                      </p>\n                    </div>\n                  </Cartao.Content>\n                </Cartao>\n              </motion.div>\n            )}\n            </AnimatePresence>\n          </div>\n\n          \n          <div className=\"lg:col-span-1\">\n            <Cartao className=\"sticky top-24 div-destaque div-arredondada div-sombra shadow-lg\">\n              <Cartao.Header>\n                <Cartao.Title className=\"text-xl sm:text-2xl text-brand-text-kaline\">Resumo do Pedido</Cartao.Title>\n              </Cartao.Header>\n              <Cartao.Content className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-brand-text-muted-kaline\">Subtotal:</span>\n                  <span className=\"text-brand-text-kaline\">R$ {subtotal.toFixed(2).replace('.', ',')}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-brand-text-muted-kaline\">Frete:</span>\n                  <span className=\"text-brand-text-kaline\">R$ {shippingCost.toFixed(2).replace('.', ',')}</span>\n                </div>\n                <div className=\"flex justify-between font-semibold text-base sm:text-lg pt-2 border-t border-border\">\n                  <span className=\"text-brand-text-kaline\">Total:</span>\n                  <span className=\"text-brand-primary-kaline\">R$ {total.toFixed(2).replace('.', ',')}</span>\n                </div>\n              </Cartao.Content>\n              <Cartao.Footer>\n                {currentStep < 3 ? (\n                  <Botao onClick={handleNextStep} className=\"w-full btn-primary-kaline text-sm sm:text-base\">\n                    {currentStep === 1 ? 'Continuar para Pagamento' : 'Revisar Pedido'}\n                  </Botao>\n                ) : (\n                  <Botao onClick={handlePlaceOrder} className=\"w-full btn-primary-kaline bg-green-600 hover:bg-green-700 text-sm sm:text-base\">\n                    Finalizar Pedido e Pagar\n                  </Botao>\n                )}\n              </Cartao.Footer>\n            </Cartao>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default CheckoutPage;"],"names":["CheckoutPage","useNavigate","user","useAuth","notificar","useNotificacao","cartItems","setCartItems","useState","subtotal","setSubtotal","shippingCost","setShippingCost","total","setTotal","currentStep","setCurrentStep","addresses","setAddresses","id","street","city","state","zip","country","isDefault","selectedAddressId","setSelectedAddressId","_a","find","a","_b","showAddAddressForm","setShowAddAddressForm","newAddress","setNewAddress","paymentMethod","setPaymentMethod","cardDetails","setCardDetails","number","name","expiry","cvv","useEffect","carrinhoSalvo","JSON","parse","localStorage","getItem","totalParcial","reduce","soma","item","parseFloat","price","replace","quantity","handleCardEntradaChange","e","value","target","formattedValue","trim","slice","prev","selectedAddress","addr","steps","jsxRuntimeExports","jsxs","motion","div","initial","opacity","y","animate","className","children","jsx","Botao","variant","size","onClick","ChevronLeft","map","step","index","width","length","transition","duration","ease","AnimatePresence","mode","x","exit","Cartao","Header","Title","Content","GrupoRadio","onValueChange","Label","htmlFor","ItemGrupoRadio","addressId","preventDefault","stopPropagation","filter","title","Trash2","PlusCircle","onSubmit","description","newAddr","Date","now","toString","Entrada","placeholder","onChange","type","label","icon","CreditCard","Landmark","QrCode","method","toFixed","color","Footer","handleNextStep","handlePlaceOrder"],"mappings":"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"}