{"version":3,"file":"Login-C8IbMBKo.js","sources":["../../src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\nimport { Botao } from '@/components/ui/botao';\nimport { useAuth } from '@/contexts/ContextoAutenticacao';\nimport { useNotificacao } from '@/components/ui/useNotificacao';\nimport { motion } from 'framer-motion';\nimport { LogIn as Entrar, Eye, EyeOff, AlertTriangle, UserCheck, Briefcase } from 'lucide-react';\nimport { Label } from '@/components/ui/rotulo';\nimport { GrupoRadio, ItemGrupoRadio } from '@/components/ui/grupo-radio';\n\n// ==============================\n// PÁGINA DE LOGIN - ONDE A DIVERSÃO COMEÇA\n// ou termina, dependendo se vc lembra a senha\n// #esqueciminhasenha #naoeh1234\n// ==============================\n// aviso: contém código feito na pressa\n// se funcionar, foi sorte\n// se não funcionar, tenta 'admin/admin'\nconst LoginPage = () => {\n  // ===== ESTADOS =====\n  // a parte que ninguem gosta de fazer\n  // mas tem que ter senao nao funciona\n  // #reactExigente #queriaquefosseoprimeiro\n  \n  // email que vc jurou que lembrava\n  // mas na verdade usou aquele do ensino medio\n  const [email, setEmail] = useState('');\n  \n  // senha que vc acha que é a certa\n  // mas ja tentou 3 vezes e ta bloqueado\n  const [password, setPassword] = useState('');\n  \n  // tipo de perfil: cliente ou vendedor\n  // escolhe errado e se ferrou\n  // #escolhaserio #naotemvolta\n  const [profileType, setProfileType] = useState('customer');\n  \n  // mostrar senha? so se tiver sozinho\n  // ou se nao ligar pra privacidade mesmo\n  // #senhavisivel #fodase\n  const [showPassword, setShowPassword] = useState(false);\n  \n  // estado de carregamento\n  // aquele loading que nunca acaba\n  // #carregando #vaitravarnovamente\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  // ===== HOOKS =====\n  // a magia negra do react\n  // se der pau, chuta o balde\n  \n  // hook pra navegar entre paginas\n  // tipo o maps, mas menos util\n  const navigate = useNavigate();\n  \n  // hook pra pegar a localizacao\n  // nao, nao é o gps do seu celular\n  // #naoestoutevigiando #mentira\n  const location = useLocation();\n  \n  // pega as funcoes de autenticacao\n  // se nao tiver, fudeu\n  // #tentedenovo #botaumalert\n  const { login, user } = useAuth();\n  \n  // hook pra mostrar notificacoes\n  // aqueles popups chatos que ninguem le\n  // #fechar #fechar #fechar\n  \n  // efeito que mostra mensagem de redirecionamento\n  // tipo quando vc tenta entrar sem estar logado\n  // e aparece 'faça login primeiro' como se vc nao soubesse\n  const { notificar } = useNotificacao();\n\n  const messageFromState = location.state?.message;\n\n  useEffect(() => {\n    if (messageFromState) {\n      notificar({\n        title: \"Ei, peraí!\",\n        description: messageFromState,\n        variant: \"destructive\",\n        duration: 5000,\n        icon: <AlertTriangle className=\"h-5 w-5 text-destructive-foreground\" />\n      });\n    }\n  }, [messageFromState, notificar]);\n\n  // Efeito que redireciona o usuário logado\n  // (porque ninguém merece ficar na página de login já logado)\n  useEffect(() => {\n    if (user) {\n      // Se veio de alguma página, volta pra lá. Se não, vai pra dashboard ou home\n      const destino = location.state?.from?.pathname || \n                    (user.role === 'seller' ? '/vendedor/painel' : '/');\n      \n      // Navega para o destino (e limpa o histórico pra não ficar em loop)\n      navigate(destino, { replace: true });\n    }\n  }, [user, navigate, location.state]);\n\n  // Função que tenta fazer login\n  // Se der errado, a culpa é do usuário (sempre)\n  const handleSubmit = async (e) => {\n    e.preventDefault(); // Impece o formulário de dar refresh na página\n    setIsSubmitting(true); // Ativa o loading (aquela rodinha que gira)\n    \n    // Validação básica (porque confiar no usuário é pedir pra ter dor de cabeça)\n    if (!email || !password) {\n      notificar({ \n        title: \"Ei, tá faltando algo!\", \n        description: \"Preencha email e senha, por favor. Não é tão difícil assim.\", \n        variant: \"destructive\", \n        duration: 3000 \n      });\n      setIsSubmitting(false); // Desativa o loading\n          return;\n        }\n\n        await new Promise(resolve => setTimeout(resolve, 1000));\n\n        let userData = null;\n        if (profileType === 'customer' && email === 'cliente@gmail.com' && password === 'cliente123') {\n          userData = { id: 'user1', name: 'Cliente', email, role: 'customer' };\n        } else if (profileType === 'seller' && email === 'vendedor@gmail.com' && password === 'vendedor123') {\n          userData = { id: 'seller1', name: 'Vendedor', email, role: 'seller' };\n        }\n\n        if (userData) {\n          login(userData);\n          notificar({ title: \"Login bem-sucedido!\", description: `Bem-vindo(a) de volta, ${userData.name}!`, duration: 2500 });\n          \n        } else {\n          notificar({ title: \"Ops!\", description: \"Não é você, sou eu ;(\", variant: \"destructive\", duration: 3000 });\n        }\n        setIsSubmitting(false);\n      };\n\n      return (\n        <motion.div\n          key=\"login-page\"\n          initial={{ opacity: 0, y: 20 }}  // Começa invisível e um pouco pra baixo\n          animate={{ opacity: 1, y: 0 }}   // Vem pra cima suavemente\n          exit={{ opacity: 0, y: -20 }}    // Sai pra baixo suavemente\n          transition={{ duration: 0.3 }}    // Duração da animação\n          className=\"div-container flex flex-col items-center justify-center min-h-screen\"\n        >\n          {/* Card de login com animação suave */}\n          <div className=\"div-destaque div-arredondada div-sombra w-full max-w-md p-6 sm:p-8 bg-brand-card-kaline dark:bg-card\">\n            <div className=\"div-centralizada div-espacada\">\n              <div className=\"text-center mb-6 sm:mb-8\">\n                <Entrar className=\"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-brand-primary-kaline mb-3\" />\n                <h1 className=\"text-2xl sm:text-3xl font-bold font-heading text-brand-text-kaline dark:text-brand-text-kaline\">Acessar Conta</h1>\n                <p className=\"text-sm text-brand-text-muted-kaline dark:text-muted-foreground mt-1\">\n                  Bem-vindo(a) de volta à Kaline Store!\n                </p>\n              </div>\n\n              {/* Formulário de login - onde a mágica (ou o desespero) acontece */}\n              <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-5\">\n                <div>\n                  <Label htmlFor=\"profileType\" className=\"text-sm font-medium text-brand-text-kaline dark:text-brand-text-kaline mb-1.5 block\">Tipo de Perfil</Label>\n                  <GrupoRadio \n                    id=\"profileType\"\n                    value={profileType} \n                    onValueChange={setProfileType} \n                    className=\"grid grid-cols-2 gap-2 sm:gap-3\"\n                    aria-label=\"Selecione o tipo de perfil\"\n                  >\n                    <div>\n                      <ItemGrupoRadio value=\"customer\" id=\"customer\" className=\"sr-only\" />\n                      <Label \n                        htmlFor=\"customer\"\n                        className={`flex items-center justify-center p-2.5 border rounded-md text-xs sm:text-sm cursor-pointer transition-all ${profileType === 'customer' ? 'bg-brand-primary-kaline text-primary-foreground border-brand-primary-kaline ring-2 ring-brand-primary-kaline ring-offset-1' : 'bg-background hover:bg-muted border-input'}`}\n                      >\n                        <UserCheck className=\"mr-1.5 h-4 w-4\" /> Cliente\n                      </Label>\n                    </div>\n                    <div>\n                      <ItemGrupoRadio value=\"seller\" id=\"seller\" className=\"sr-only\" />\n                      <Label \n                        htmlFor=\"seller\"\n                        className={`flex items-center justify-center p-2.5 border rounded-md text-xs sm:text-sm cursor-pointer transition-all ${profileType === 'seller' ? 'bg-brand-primary-kaline text-primary-foreground border-brand-primary-kaline ring-2 ring-brand-primary-kaline ring-offset-1' : 'bg-background hover:bg-muted border-input'}`}\n                      >\n                         <Briefcase className=\"mr-1.5 h-4 w-4\" /> Vendedor\n                      </Label>\n                    </div>\n                  </GrupoRadio>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"email\" className=\"text-sm font-medium text-brand-text-kaline dark:text-brand-text-kaline\">Email</Label>\n                  <input\n                    id=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder={profileType === 'customer' ? \"cliente@kaline.com\" : \"vendedor@kaline.com\"}\n                    className=\"mt-1 bg-background dark:bg-input rounded-md text-sm\"\n                    required\n                    aria-required=\"true\"\n                    autoComplete=\"email\"\n                  />\n                </div>\n                <div className=\"div-espacada\">\n                  <Label htmlFor=\"password\" className=\"text-sm font-medium text-brand-text-kaline dark:text-brand-text-kaline\">Senha</Label>\n                  <input\n                    id=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder={profileType === 'customer' ? \"cliente123\" : \"vendedor123\"}\n                    className=\"mt-1 bg-background dark:bg-input rounded-md text-sm pr-10\"\n                    required\n                    aria-required=\"true\"\n                    autoComplete=\"current-password\"\n                  />\n                  <Botao\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"absolute right-1 bottom-1 h-8 w-8 text-brand-text-muted-kaline hover:bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    aria-label={showPassword ? \"Esconder senha\" : \"Mostrar senha\"}\n                    tabIndex={-1}\n                  >\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </Botao>\n                </div>\n                <Botao type=\"submit\" className=\"w-full btn-primary-kaline rounded-md text-sm sm:text-base py-2.5\" disabled={isSubmitting}>\n                  {isSubmitting ? 'Entrando...' : 'Entrar'}\n                </Botao>\n              </form>\n              <p className=\"mt-6 text-center text-xs sm:text-sm text-brand-text-muted-kaline dark:text-muted-foreground\">\n                Não tem uma conta?{' '}\n                <Link to=\"/register\" className=\"font-medium text-brand-primary-kaline hover:underline\">\n                  Cadastre-se\n                </Link>\n              </p>\n               <p className=\"mt-2 text-center text-xs text-brand-text-muted-kaline dark:text-muted-foreground\">\n                <Link to=\"/forgot-password\" className=\"font-medium text-brand-primary-kaline hover:underline\">\n                  Esqueceu a senha?\n                </Link>\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      );\n    };\n\n    export default LoginPage;"],"names":["LoginPage","email","setEmail","useState","password","setPassword","profileType","setProfileType","showPassword","setShowPassword","isSubmitting","setIsSubmitting","navigate","useNavigate","location","useLocation","login","user","useAuth","notificar","useNotificacao","messageFromState","_a","state","message","useEffect","title","description","variant","duration","icon","jsx","AlertTriangle","className","destino","_b","from","pathname","role","replace","jsxRuntimeExports","motion","div","initial","opacity","y","animate","exit","transition","children","jsxs","Entrar","onSubmit","async","e","preventDefault","Promise","resolve","setTimeout","userData","id","name","Label","htmlFor","GrupoRadio","value","onValueChange","ItemGrupoRadio","UserCheck","Briefcase","type","onChange","target","placeholder","required","autoComplete","Botao","size","onClick","tabIndex","EyeOff","Eye","disabled","Link","to"],"mappings":"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"}