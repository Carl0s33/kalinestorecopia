import{e,j as t,B as a}from"./index-DIazkKjz.js";import{r as s,L as r}from"./react-9XyJl28y.js";import{m as i,g as n,k as d,d as l,P as o,y as c}from"./vendor-B8aPdzC6.js";const m=()=>{const[m,x]=s.useState([]),{notificar:u}=e(),h=()=>{try{const e=JSON.parse(localStorage.getItem("cart")||"[]");Array.isArray(e)?x(e):x([])}catch(e){console.error("Erro ao carregar o carrinho:",e),x([])}};s.useEffect((()=>(h(),window.addEventListener("cartUpdated",h),()=>window.removeEventListener("cartUpdated",h))),[]);const p=e=>{try{localStorage.setItem("cart",JSON.stringify(e)),x(e),window.dispatchEvent(new CustomEvent("cartUpdated"))}catch(t){console.error("Erro ao salvar o carrinho:",t)}},b=(e,t,a)=>{const s=m.filter((s=>!(s.id===e&&s.size===t&&s.color===a)));p(s),u({title:"Item removido!",description:"O produto foi removido do seu carrinho.",variant:"destructive",duration:2e3})},g=(e,t,a,s)=>{if(s<1)return void b(e,t,a);const r=m.map((r=>r.id===e&&r.size===t&&r.color===a?{...r,quantity:s}:r));p(r)},y=m.reduce(((e,t)=>{var a,s;return e+parseFloat((null==(s=null==(a=t.price)?void 0:a.replace("R$ ",""))?void 0:s.replace(",","."))||"0")*(t.quantity||0)}),0),j="https://images.unsplash.com/photo-1600577916048-85e976972793?w=100&h=100&fit=crop";return t.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"max-w-4xl mx-auto px-2 sm:px-4 py-4 sm:py-8",children:[t.jsxs("div",{className:"flex items-center justify-center mb-6 sm:mb-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold font-heading text-brand-text-kaline",children:"Meu Carrinho"}),t.jsx(n,{className:"ml-2 h-7 w-7 sm:h-8 sm:w-8 text-brand-primary-kaline"})]}),0===m.length?t.jsxs(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-10 sm:py-12 bg-brand-card-kaline dark:bg-card rounded-lg shadow-lg",children:[t.jsx(n,{className:"h-16 w-16 sm:h-20 sm:w-20 text-brand-text-muted-kaline dark:text-muted-foreground mx-auto mb-4 sm:mb-6"}),t.jsx("p",{className:"text-lg sm:text-xl text-brand-text-muted-kaline dark:text-muted-foreground mb-3 sm:mb-4",children:"Seu carrinho está vazio."}),t.jsx(a,{asChild:!0,className:"btn-primary-kaline rounded-md text-sm",children:t.jsx(r,{to:"/",children:"Continuar Comprando"})})]}):t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx("div",{className:"bg-brand-card-kaline dark:bg-card p-4 sm:p-6 rounded-lg shadow-lg",children:t.jsx(d,{children:m.map(((e,s)=>t.jsxs(i.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20,transition:{duration:.2}},transition:{duration:.3,delay:.05*s},className:"flex flex-col sm:flex-row items-center justify-between py-3 sm:py-4 border-b border-border/60 last:border-b-0",children:[t.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 mb-3 sm:mb-0 flex-grow w-full sm:w-auto",children:[t.jsx("img",{src:e.image&&e.image.startsWith("http")?e.image:j,alt:e.name,className:"w-16 h-20 sm:w-20 sm:h-24 object-cover rounded-md bg-muted",onError:e=>{e.target.onerror=null,e.target.src=j}}),t.jsxs("div",{className:"min-w-0",children:[t.jsx(r,{to:`/product/${e.id}`,className:"font-semibold text-sm sm:text-base text-brand-text-kaline dark:text-brand-text-kaline hover:underline truncate block",title:e.name,children:e.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-brand-text-muted-kaline dark:text-muted-foreground",children:[e.size&&`Tam: ${e.size}`," ",e.color&&e.size&&" - ",e.color&&`Cor: ${e.color}`]}),t.jsx("p",{className:"text-xs sm:text-sm text-brand-text-muted-kaline dark:text-muted-foreground sm:hidden mt-1",children:e.price})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 w-full sm:w-auto justify-between sm:justify-end",children:[t.jsxs("div",{className:"flex items-center border border-input rounded-md",children:[t.jsx(a,{variant:"ghost",size:"sm",onClick:()=>g(e.id,e.size,e.color,e.quantity-1),className:"px-2 h-8 w-8 rounded-r-none text-brand-primary-kaline hover:bg-brand-primary-kaline/10",children:t.jsx(l,{className:"h-3.5 w-3.5"})}),t.jsx("span",{className:"px-2 sm:px-3 text-xs sm:text-sm w-8 text-center",children:e.quantity}),t.jsx(a,{variant:"ghost",size:"sm",onClick:()=>g(e.id,e.size,e.color,e.quantity+1),className:"px-2 h-8 w-8 rounded-l-none text-brand-primary-kaline hover:bg-brand-primary-kaline/10",children:t.jsx(o,{className:"h-3.5 w-3.5"})})]}),t.jsx("p",{className:"font-semibold text-sm sm:text-base text-brand-text-kaline dark:text-brand-text-kaline w-20 sm:w-24 text-right",children:(e.price*e.quantity).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),t.jsx(a,{variant:"ghost",size:"icon",onClick:()=>b(e.id,e.size,e.color),className:"text-destructive hover:text-destructive/80 hover:bg-destructive/10 rounded-full h-8 w-8",children:t.jsx(c,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]},`${e.id}-${e.size}-${e.color}`)))})}),t.jsxs("div",{className:"bg-brand-card-kaline dark:bg-card p-4 sm:p-6 rounded-lg shadow-lg flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-4",children:[t.jsxs("div",{className:"text-center sm:text-left",children:[t.jsxs("p",{className:"text-lg sm:text-xl font-semibold text-brand-text-kaline dark:text-brand-text-kaline",children:["Subtotal: R$ ",y.toFixed(2).replace(".",",")]}),t.jsx("p",{className:"text-xs sm:text-sm text-brand-text-muted-kaline dark:text-muted-foreground",children:"Taxas e frete serão calculados no checkout."})]}),t.jsx(a,{size:"lg",className:"btn-primary-kaline rounded-md text-sm sm:text-base w-full sm:w-auto",asChild:!0,children:t.jsx(r,{to:"/checkout",children:"Finalizar Compra"})})]})]})]})};export{m as default};
//# sourceMappingURL=Carrinho-CVWkV7ZF.js.map
