import{r as e,i as t}from"./react-9XyJl28y.js";import{b as n,a as s,d as r}from"./index-ChjETHs9.js";import{P as o,d as i}from"./index-DvwaLTDU.js";import{u as a,j as u}from"./index-DIazkKjz.js";function l(t,s=(null==globalThis?void 0:globalThis.document)){const r=n(t);e.useEffect((()=>{const e=e=>{"Escape"===e.key&&r(e)};return s.addEventListener("keydown",e,{capture:!0}),()=>s.removeEventListener("keydown",e,{capture:!0})}),[r,s])}var d,c="dismissableLayer.update",v="dismissableLayer.pointerDownOutside",f="dismissableLayer.focusOutside",E=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),m=e.forwardRef(((t,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:m,onPointerDownOutside:b,onFocusOutside:h,onInteractOutside:w,onDismiss:D,...P}=t,g=e.useContext(E),[L,C]=e.useState(null),O=(null==L?void 0:L.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,T]=e.useState({}),x=a(r,(e=>C(e))),j=Array.from(g.layers),[k]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),R=j.indexOf(k),W=L?j.indexOf(L):-1,B=g.layersWithOutsidePointerEventsDisabled.size>0,S=W>=R,F=function(t,s=(null==globalThis?void 0:globalThis.document)){const r=n(t),o=e.useRef(!1),i=e.useRef((()=>{}));return e.useEffect((()=>{const e=e=>{if(e.target&&!o.current){let t=function(){y(v,r,n,{discrete:!0})};const n={originalEvent:e};"touch"===e.pointerType?(s.removeEventListener("click",i.current),i.current=t,s.addEventListener("click",i.current,{once:!0})):t()}else s.removeEventListener("click",i.current);o.current=!1},t=window.setTimeout((()=>{s.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),s.removeEventListener("pointerdown",e),s.removeEventListener("click",i.current)}}),[s,r]),{onPointerDownCapture:()=>o.current=!0}}((e=>{const t=e.target,n=[...g.branches].some((e=>e.contains(t)));S&&!n&&(null==b||b(e),null==w||w(e),e.defaultPrevented||null==D||D())}),O),z=function(t,s=(null==globalThis?void 0:globalThis.document)){const r=n(t),o=e.useRef(!1);return e.useEffect((()=>{const e=e=>{if(e.target&&!o.current){y(f,r,{originalEvent:e},{discrete:!1})}};return s.addEventListener("focusin",e),()=>s.removeEventListener("focusin",e)}),[s,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}((e=>{const t=e.target;[...g.branches].some((e=>e.contains(t)))||(null==h||h(e),null==w||w(e),e.defaultPrevented||null==D||D())}),O);return l((e=>{W===g.layers.size-1&&(null==m||m(e),!e.defaultPrevented&&D&&(e.preventDefault(),D()))}),O),e.useEffect((()=>{if(L)return i&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(d=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(L)),g.layers.add(L),p(),()=>{i&&1===g.layersWithOutsidePointerEventsDisabled.size&&(O.body.style.pointerEvents=d)}}),[L,O,i,g]),e.useEffect((()=>()=>{L&&(g.layers.delete(L),g.layersWithOutsidePointerEventsDisabled.delete(L),p())}),[L,g]),e.useEffect((()=>{const e=()=>T({});return document.addEventListener(c,e),()=>document.removeEventListener(c,e)}),[]),u.jsx(o.div,{...P,ref:x,style:{pointerEvents:B?S?"auto":"none":void 0,...t.style},onFocusCapture:s(t.onFocusCapture,z.onFocusCapture),onBlurCapture:s(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:s(t.onPointerDownCapture,F.onPointerDownCapture)})}));m.displayName="DismissableLayer";var b=e.forwardRef(((t,n)=>{const s=e.useContext(E),r=e.useRef(null),i=a(n,r);return e.useEffect((()=>{const e=r.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}}),[s.branches]),u.jsx(o.div,{...t,ref:i})}));function p(){const e=new CustomEvent(c);document.dispatchEvent(e)}function y(e,t,n,{discrete:s}){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?i(r,o):r.dispatchEvent(o)}b.displayName="DismissableLayerBranch";var h=m,w=b,D=e.forwardRef(((n,s)=>{var i;const{container:a,...l}=n,[d,c]=e.useState(!1);r((()=>c(!0)),[]);const v=a||d&&(null==(i=null==globalThis?void 0:globalThis.document)?void 0:i.body);return v?t.createPortal(u.jsx(o.div,{...l,ref:s}),v):null}));D.displayName="Portal";export{w as B,m as D,D as P,h as R,l as u};
//# sourceMappingURL=index-Bu98KW1o.js.map
